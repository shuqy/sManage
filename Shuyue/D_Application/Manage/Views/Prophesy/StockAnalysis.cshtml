@using Model.Extend
@{
    ViewBag.Title = "分析";
    //Model.ViewModel.MaximumSubarrayRose maxsr = ViewBag.maxsr;
    //Model.ViewModel.MinimumSubarrayRose minsr = ViewBag.minsr;
    List<Model.ViewModel.T_TransactionRecord> recordList = ViewBag.RecordList;
    List<Model.ViewModel.SubarrayRose> subarrayRose = ViewBag.SubarryRose;
    Dictionary<int, string> dic = new Dictionary<int, string>
    {
        {0,"↑" }, {1,"↓" }, {2,"-" },
    };
}
<div class="smContent">
    <div class="mianbaowarp margin-top20  clearfix">
        @Html.Partial("_NavPartial")
    </div>
    @if (ViewBag.ErrorTip == null)
    {
        foreach (var item in subarrayRose)
        {
            <div style="padding:20px;border-bottom:1px solid #ccc;">
                <p>
                    @item.BeginData.ToShortDateString() 至 @item.EndDate.ToShortDateString()
                    <font color="@(item.Type== SubarrayRoseEnum.Rose?"red":item.Type== SubarrayRoseEnum.Drop?"green":"")">@(dic[(int)item.Type])</font> <br />
                    @recordList.FirstOrDefault(r => r.TradingDate == item.BeginData).Close.ToString("f2") 到 @recordList.FirstOrDefault(r => r.TradingDate == item.EndDate).Close.ToString("f2")  |
                    @((recordList.Where(a => a.TradingDate >= item.BeginData && a.TradingDate <= item.EndDate).Sum(r => r.Rose) * 100).ToString("f2") + "%")
                </p>
            </div>
        }

    }
    else
    {
        <label>@ViewBag.ErrorTip</label>
    }
</div>


@*<h3>@maxsr.RecordList.FirstOrDefault().StockCode</h3>

    <hr />
    <label>最强</label><br />
    <label>@maxsr.BeginData - @maxsr.EndDate</label><br />
    <label>@(maxsr.RecordList.Sum(r => r.Rose) * 100 + "%")</label><br />
    <label>@maxsr.RecordList.FirstOrDefault(r => r.TradingDate == maxsr.BeginData).Close - @maxsr.RecordList.FirstOrDefault(r => r.TradingDate == maxsr.EndDate).Close</label>

    <hr />
    <label>最弱</label><br />
    <label>@minsr.BeginData - @minsr.EndDate</label><br />
    <label>@(minsr.RecordList.Sum(r => r.Rose) * 100 + "%")</label><br />
    <label>@minsr.RecordList.FirstOrDefault(r => r.TradingDate == minsr.BeginData).Close - @minsr.RecordList.FirstOrDefault(r => r.TradingDate == minsr.EndDate).Close</label>*@
